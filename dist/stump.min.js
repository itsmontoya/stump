export function stump(t){const e=document.getElementById(t.targetID);e.innerHTML="";let n=Object.assign({},t.state);function i(o){n=o(n),update(i,e,t.view(n),e.children[0])}update(i,e,t.view(t.state),void 0,0),t.dispatchers.forEach(t=>t(i))}export const c=t=>({type:t.type,children:t.children||[],options:t.options||{}});export const response=t=>e=>e(t);export const action=t=>(e,n)=>n(n=>t(e,n));function create(t,e){if("string"==typeof e)return document.createTextNode(e);const n=document.createElement(e.type);return function(t,e,n){if(!n)return;n.map(e=>create(t,e)).forEach(e.appendChild.bind(e))}(t,n,e.children),setOptions(t,n,e.options),n}function update(t,e,n,i,o=0){if(i)if(n)if(function(t,e){if("string"==typeof t)return function(t,e){return t!==e.nodeValue}(t,e);if(function(t,e){return typeof t!=typeof e}(t,e))return!0;if(function(t,e){return t.type!==function(t){if(!t)return"";const e=t=t;if(!e.tagName)return"";return e.tagName.toLowerCase()}(e)}(t,e))return!0;return!1}(n,i)){const i=create(t,n);e.replaceChild(i,getChildNode(e,o))}else!function(t,e,n){if("string"==typeof e)return;const i=e.children.length,o=n.childNodes.length;i>o?function(t,e,n,i){for(let o=0;o<i;o++)updateChild(t,e,n,o)}(t,e,n,i):function(t,e,n,i){for(let o=i-1;o>-1;o--)updateChild(t,e,n,o)}(t,e,n,o)}(t,n,i),function(t,e,n){if("string"==typeof e)return;const i=e;(function(t,e){for(let n=0;n<t.attributes.length;n++)clearAttribute(t,e,n);!function(t,e){if(!t.value)return;e.value||(t.value="")}(t,e)})(n,i.options),function(t){const e=t;if(!e.__stumpFns)return;for(;e.__stumpFns.length;){let t=e.__stumpFns.pop();e[t]=void 0}}(n),setOptions(t,n,i.options)}(t,n,i);else e.removeChild(getChildNode(e,o));else{const i=create(t,n);e.appendChild(i)}}function updateChild(t,e,n,i){var o;update(t,n,(o=i,e.children[o]),getChildNode(n,i),i)}function setOptions(t,e,n){for(let i in n)setOption(t,e,n,i)}function setOption(t,e,n,i){const o=function(t){switch(t){case"contenteditable":return"contentEditable";default:return t}}(i),r=function(t,e,n){const i=e[n];if("style"===n)return function(t){var e=[];for(let n in t)e.push(`${n}: ${t[n]};`);return e.join(" ")}(i);if(isEventKey(n)){return((t,e)=>n=>e(n,t))(t,i)}return i}(t,n,i);isEventKey(i)?function(t,e,n){const i=t;i[e]=n,void 0===i.__stumpFns&&(i.__stumpFns=[]);i.__stumpFns.push(e)}(e,i,r):e.setAttribute(o,r)}function getChildNode(t,e){return t.childNodes[e]}function isEventKey(t){return"on"===t.substr(0,2)}function clearAttribute(t,e,n){const i=t.attributes[n].name;e[i]||t.removeAttribute(i)}